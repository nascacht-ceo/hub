name: _restore
on:
  workflow_call:
    inputs:
      update_packages:
        type: boolean
        default: false

jobs:
  restore:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-dotnet@v4
        with:
          dotnet-version: '10.0.x'
      
      - name: Cache NuGet packages
        uses: actions/cache@v4
        with:
          path: ~/.nuget/packages
          key: ${{ runner.os }}-nuget-${{ hashFiles('**/*.csproj*', '**/Directory.Build.props') }}
          restore-keys: |
            ${{ runner.os }}-nuget-

      - name: Update Outdated Packages
        if: ${{ inputs.update_packages }}
        run: |
          dotnet tool install --global dotnet-outdated-tool
          dotnet outdated -u

      - name: Restore
        run: dotnet restore